(function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},i=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("1356"),n=r.n(a);n.a},1356:function(e,t,r){},"151c":function(e,t,r){"use strict";var a=r("e111"),n=r.n(a);n.a},1543:function(e,t,r){"use strict";r.r(t),r.d(t,"db",(function(){return s})),r.d(t,"auth",(function(){return o})),r.d(t,"currentUser",(function(){return l})),r.d(t,"usersCollection",(function(){return d})),r.d(t,"depsCollection",(function(){return u}));var a=r("8aa5"),n=r.n(a),i=(r("e71f"),r("ea7b"),{apiKey:"AIzaSyDY6BUnXBif2-2OncMk4Cw2oP9Q3BsGjj0",authDomain:"tarea3webavanzada.firebaseapp.com",databaseURL:"https://tarea3webavanzada.firebaseio.com",projectId:"tarea3webavanzada",storageBucket:"tarea3webavanzada.appspot.com",messagingSenderId:"894095532908",appId:"1:894095532908:web:70c423a515db856c378949",measurementId:"G-6TV7377Y2Z"});n.a.initializeApp(i);var s=n.a.firestore(),o=n.a.auth(),l=o.currentUser,c={timestampsInSnapshots:!0};s.settings(c);var d=s.collection("users"),u=s.collection("deps")},"193c":function(e,t,r){"use strict";var a=r("b62b"),n=r.n(a);n.a},"2b21":function(e,t,r){"use strict";var a=r("ef32"),n=r.n(a);n.a},"2f8f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar"),r("router-view")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-app-bar",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",absolute:"",dark:"","scroll-target":"#playground-example",color:e.color,"elevate-on-scroll":e.elevateOnScroll,"hide-on-scroll":e.hideOnScroll,"fade-on-scroll":e.fadeOnScroll,"fade-img-on-scroll":e.fadeImgOnScroll,"inverted-scroll":e.invertedScroll,collapse:e.collapse,"collapse-on-scroll":e.collapseOnScroll,"shrink-on-scroll":e.shrinkOnScroll,extended:e.extended}},[r("v-spacer"),r("v-toolbar-title",{staticClass:"title",staticStyle:{"align-self":"center"}},[e._v("AUTHAPP")]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.logout()}}},[r("v-icon",[e._v("\n          mdi-logout\n         ")])],1)],1)],1)},o=[],l={data:function(){return{elevateOnScroll:!1,hideOnScroll:!1,fadeOnScroll:!1,fadeImgOnScroll:!1,invertedScroll:!1,collapse:!1,collapseOnScroll:!0,shrinkOnScroll:!1,extended:!1,color:"dark",colors:["primary","accent","warning lighten-2","teal","orange"]}},methods:{logout:function(){localStorage.clear(),this.$store.currentUser=null,this.$router.push("/login")}}},c=l,d=(r("5899"),r("2877")),u=r("6544"),p=r.n(u),v=r("40dc"),m=r("8336"),f=r("132d"),h=r("2fa4"),b=r("2a7f"),g=Object(d["a"])(c,s,o,!1,null,"25f53c6c",null),x=g.exports;p()(g,{VAppBar:v["a"],VBtn:m["a"],VIcon:f["a"],VSpacer:h["a"],VToolbarTitle:b["a"]});var w={name:"App",components:{Navbar:x},data:function(){return{}}},k=w,y=(r("034f"),r("7496")),_=Object(d["a"])(k,n,i,!1,null,null,null),U=_.exports;p()(_,{VApp:y["a"]});var C=r("f309");a["a"].use(C["a"]);var S=new C["a"]({icons:{iconfont:"mdi"}}),V=r("8c4f"),D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("v-card",{staticClass:"containerClass",attrs:{elevation:"5"}},[r("v-container",[r("v-dialog",{attrs:{persistent:"",width:"310"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Imposible iniciar sesión. Revisar correo o contraseña")]),r("v-card-text",[e._v(e._s(e.msg))]),r("v-card-actions",[r("div",{staticClass:"flex-grow-1"}),r("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.isOpen=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("h1",[e._v("Inicio de Sesión")]),r("br"),r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),r("p",[e._v("\r\n            ¿No tienes una cuenta?,\r\n            "),r("router-link",{staticClass:"linkStyle",attrs:{to:"/register"}},[e._v("Regístrate")])],1),r("v-text-field",{attrs:{type:e.show1?"text":"password",label:"Password",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),r("br"),r("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.login()}}},[e._v("Ingresar")])],1)],1)],1)],1)},E=[],A=(r("bc3a"),r("1543")),O={name:"Login",data:function(){return{show1:!1,show2:!0,show3:!1,show4:!1,email:"",password:"",isOpen:!1,msg:"",emailRules:[function(e){return!!e||"El correo electrónico es obligatorio"}],passwordRules:[function(e){return!!e||"La contraseña es obligatoria"}]}},methods:{login:function(){var e=this;"admin"===this.email&&"admin"===this.password?(this.$store.currentUser={name:"admin"},this.$router.push({name:"admin"})):A.auth.signInWithEmailAndPassword(this.email,this.password).then((function(t){e.$store.commit("setCurrentUser",t.user),e.$store.dispatch("fetchUserProfile"),e.$router.push("/profileUser")})).catch((function(e){console.log(e)}))}}},$=O,R=(r("c00d"),r("b0af")),P=r("99d9"),j=r("a523"),I=r("169a"),T=r("4bd4"),M=r("8654"),z=Object(d["a"])($,D,E,!1,null,"c88ec604",null),q=z.exports;p()(z,{VBtn:m["a"],VCard:R["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VContainer:j["a"],VDialog:I["a"],VForm:T["a"],VTextField:M["a"]});var B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"principal"},[r("div",{staticClass:"form"},[r("v-card",[r("v-container",[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1",md:"4",sm:"3"}},[r("h1",[e._v(e._s(e.title))])])],1),r("div",{staticClass:"registerContent"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"Nombres",required:""},model:{value:e.names,callback:function(t){e.names=t},expression:"names"}})],1),r("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[r("v-text-field",{attrs:{rules:e.lastnamesRules,label:"Apellidos",required:""},model:{value:e.lastnames,callback:function(t){e.lastnames=t},expression:"lastnames"}})],1)],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1",md:"6",sm:"2"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"Correo",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show3?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch],type:e.show3?"text":"password",name:"input-10-2",label:"Contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show3=!e.show3}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show4?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch,e.rules.samePassword],type:e.show4?"text":"password",name:"input-10-2",label:"Confirmar contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show4=!e.show4}},model:{value:e.conPassword,callback:function(t){e.conPassword=t},expression:"conPassword"}})],1)],1)],1),r("br"),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"8"}},[r("v-subheader",[e._v("Datos para la dependencia")])],1)],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1",md:"6",sm:"2"}},[r("v-select",{attrs:{items:e.deps,"item-text":"dependencias","menu-props":{maxHeight:"400"},label:"Seleccionar ",multiple:"",hint:"Selecciona tu(s) dependencia(s)","persistent-hint":""},model:{value:e.modelDeps,callback:function(t){e.modelDeps=t},expression:"modelDeps"}})],1)],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1",md:"3",sm:"1"}},[r("v-btn",{staticStyle:{margin:"5px",background:"#08799C"},attrs:{disabled:e.disabledButtonRegister,color:"primary"},on:{click:function(t){return e.signup()}}},[e._v("Registrarse")])],1)],1)],1),r("input",e._g({attrs:{type:"button"}},e.signup))],1)],1)],1)])},L=[],N=(r("1543"),r("1543")),F={name:"Register",data:function(){var e=this;return{title:"Register",names:"",lastnames:"",email:"",password:"",conPassword:"",deps:["Desarrollo","Análisis","Diseño","Logística","Comunicación","Administrador"],valid:"",date:(new Date).toISOString().substr(0,10),id:Math.floor(997*Math.random()+3),show1:!1,show2:!0,show3:!1,show4:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=8||"Min 8 characters"},samePassword:function(t){return t===e.password||"Las contraseñas no coinciden"}},nameRules:[function(e){return!!e||"El nombre es requerido"},function(e){return e.length>3||"El nombre debe ser más largo a 3 caracteres"}],lastnameRules:[function(e){return!!e||"El apellido es requerido"},function(e){return e.length>3||"El apellido debe ser más largo a 3 caracteres"}],emailRules:[function(e){return!!e||"El correo es requerido"},function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"El correo no es valido"}]}},methods:{signup:function(){var e=this,t={nombre:this.names,apellido:this.lastnames,email:this.email,pass:this.password,id:this.id,deps:this.deps,valido:this.date};console.log(this.names),N.auth.createUserWithEmailAndPassword(this.email,this.password).then((function(r){N.usersCollection.add(t),e.$router.push("/login")})).catch((function(e){console.log(e)}))}},computed:{disabledButtonRegister:function(){return!this.names&&!this.lastname&&!this.email&&!this.password&&!this.deps&&this.conPassword===this.password}}},Z=F,W=(r("151c"),r("62ad")),K=r("0fd9"),G=r("b974"),H=r("e0c7"),J=Object(d["a"])(Z,B,L,!1,null,"2cee2edd",null),Y=J.exports;p()(J,{VBtn:m["a"],VCard:R["a"],VCol:W["a"],VContainer:j["a"],VForm:T["a"],VRow:K["a"],VSelect:G["a"],VSubheader:H["a"],VTextField:M["a"]});var Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}}),r("div",{staticStyle:{margin:"auto",width:"70%",display:"flex","flex-direction":"column","align-items":"center"}},[r("v-text-field",{attrs:{label:"Nombre(s)"},model:{value:e.currentUser.nombre,callback:function(t){e.$set(e.currentUser,"nombre",t)},expression:"currentUser.nombre"}}),r("v-text-field",{attrs:{label:"Apellido(s)",value:e.currentUser.apellido},model:{value:e.currentUser.apellido,callback:function(t){e.$set(e.currentUser,"apellido",t)},expression:"currentUser.apellido"}}),r("v-text-field",{attrs:{label:"Email",value:e.currentUser.email},model:{value:e.currentUser.email,callback:function(t){e.$set(e.currentUser,"email",t)},expression:"currentUser.email"}}),r("v-select",{attrs:{placeholder:"Dependencias",multiple:"",solo:"",attach:"",items:["Logística","Desarrollo"]},model:{value:e.currentUser.deps,callback:function(t){e.$set(e.currentUser,"deps",t)},expression:"currentUser.deps"}}),r("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Valido hasta","prepend-icon":"event",readonly:""},model:{value:e.currentUser.valido,callback:function(t){e.$set(e.currentUser,"valido",t)},expression:"currentUser.valido"}},a))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.currentUser.valido,callback:function(t){e.$set(e.currentUser,"valido",t)},expression:"currentUser.valido"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.date)}}},[e._v("OK")])],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.updateUser()}}},[e._v("\n           Actualizar\n         ")]),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.updatePage()}}},[e._v("\n           Cancelar\n         ")])],1)],1)],1)],1),r("div",{staticClass:"table"},[r("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"100%"},attrs:{loading:0===e.users.length,headers:e.headers,items:e.users,"items-per-page":15},scopedSlots:e._u([{key:"item.deps",fn:function(t){var a=t.item;return e._l(a.deps,(function(t){return r("p",{key:t,domProps:{textContent:e._s(t)}})}))}},{key:"item.acciones",fn:function(t){var a=t.item;return[r("v-btn",{staticClass:"mr-1",attrs:{small:"",color:"primary",rounded:""},on:{click:function(t){return e.editUser(a)}}},[r("v-icon",[e._v("mdi-pencil")])],1)]}}])})],1)])},X=[],ee=(r("ac6a"),r("1543")),te={data:function(){return{dateRules:[function(e){return!!e||"Es requerido"}],emailRules:[function(e){return!!e||"Es requerido el correo."},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Email inválido"}],rules:[function(e){return!!e||"Es requerido"},function(e){return e&&e.length<=20||"Max 20 carácteres"}],selectRules:[function(e){return e.length>0||"Al menos 1"},function(e){var t=/$/;return t.test(e)}],name:"",lastname:"",email:"",deps:[],valid:"",date:(new Date).toISOString().substr(0,10),menu:!1,menu2:!1,currentUser:"",dialogEdit:!1,dialogAdd:!1,nameLbl:!1,headers:[{text:"Id",value:"id",align:"center"},{text:"Nombre",align:"center",sortable:!0,value:"nombre"},{text:"Apellido",value:"apellido",align:"center"},{text:"Email",value:"email",align:"center"},{text:"Estado",value:"estado",sortable:!1,align:"center"},{text:"Dependencias",value:"deps",sortable:!1,align:"center"},{text:"Acciones",value:"acciones",sortable:!1,align:"center"},{text:"Valido hasta",value:"valido",sortable:!1,align:"center"}],users:[]}},created:function(){var e=this,t={id:"",nombre:"",apellido:"",estado:"",email:"",valido:"",deps:[]},r=(new Date).toISOString().substring(0,10);ee.usersCollection.get().then((function(a){a.forEach((function(a){var n=a.data();n.email===e.$store.state.currentUser.email&&(t={id:n.id,nombre:n.nombre,apellido:n.apellido,valido:n.valido,estado:r>n.valido?"Inactivo":"Activo",email:n.email,deps:n.deps},e.$store.state.currentUser=t,e.users.push(t),console.log(e.$store.state.currentUser))}))}))},props:["dep"],methods:{updatePage:function(){this.$router.go(this.$router.currentRoute)},editUser:function(e){this.dialogEdit=!0,this.currentUser=e},updateUser:function(){var e={id:this.currentUser.id,nombre:this.currentUser.nombre,apellido:this.currentUser.apellido,email:this.currentUser.email,valido:this.currentUser.valido,deps:this.currentUser.deps};ee.usersCollection.doc(e.id).set(e),this.$router.go(this.$router.currentRoute)}}},re=te,ae=(r("6ace"),r("8fea")),ne=r("2e4b"),ie=r("ce7e"),se=r("e449"),oe=Object(d["a"])(re,Q,X,!1,null,null,null),le=oe.exports;p()(oe,{VBtn:m["a"],VCard:R["a"],VCardActions:P["a"],VCardTitle:P["c"],VDataTable:ae["a"],VDatePicker:ne["a"],VDialog:I["a"],VDivider:ie["a"],VIcon:f["a"],VMenu:se["a"],VSelect:G["a"],VSpacer:h["a"],VTextField:M["a"]});var ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"adminContent"},[r("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""}},[r("v-tab",{attrs:{to:{name:"users"}}},[e._v("\n    Usuarios\n  ")]),r("v-tab",{attrs:{to:{name:"deps"}}},[e._v("\n    Dependencias\n  ")])],1),r("router-view")],1)},de=[],ue={created:function(){},methods:{}},pe=ue,ve=(r("2b21"),r("71a3")),me=r("fe57"),fe=Object(d["a"])(pe,ce,de,!1,null,null,null),he=fe.exports;p()(fe,{VTab:ve["a"],VTabs:me["a"]});var be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"depContent"},[e._l(e.deps,(function(t){return r("v-card",{key:t.nombre,staticStyle:{margin:"20px"},attrs:{"max-width":"400"}},[r("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:t.img}},[r("v-card-title",[e._v(e._s(t.nombre))])],1),r("v-card-text",[r("div",{staticClass:"orange--text"},[r("strong",[e._v(e._s(t.lugar))])]),r("div",[e._v(e._s(t.descripcion))])]),r("v-card-actions",[r("v-btn",{attrs:{color:"orange",icon:""},on:{click:function(r){return e.editDep(t)}}},[r("v-icon",[e._v("\n           mdi-information\n       ")])],1),r("v-btn",{attrs:{color:"orange",icon:""},on:{click:function(r){return e.deleteDep(t)}}},[r("v-icon",[e._v("\n       mdi-delete\n       ")])],1)],1)],1)})),r("v-dialog",{staticClass:"text-center",attrs:{width:"100vw"},model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n        Información\n       ")]),r("v-card-text",{staticStyle:{"font-size":"18px"}},[r("div",{staticStyle:{width:"100%",border:"1px solid black",margin:"15px",padding:"10px"}},[r("v-btn",{staticStyle:{"margin-left":"97%"},attrs:{icon:""}},[r("v-icon",[e._v("\n             mdi-pencil\n           ")])],1),r("p",[r("strong",[e._v("Nombre: ")]),e._v(e._s(e.currentDep.nombre))]),r("p",[r("strong",[e._v("Coordinador: ")]),e._v(e._s(e.currentDep.coordinador))]),r("p",[r("strong",[e._v("Descripción: ")]),e._v(e._s(e.currentDep.descripcion))]),r("p",[r("strong",[e._v("Lugar: ")]),e._v(e._s(e.currentDep.lugar))])],1),r("div",{staticClass:"usuarios"},[r("DepExtend",{staticStyle:{border:"1px solid black"},attrs:{dep:e.currentDep.nombre}})],1)]),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return e.closeWin()}}},[e._v("\n           Salir\n         ")])],1)],1)],1),r("v-btn",{attrs:{color:"primary",dark:"",medium:"",absolute:"",right:"",bottom:""},on:{click:function(t){e.dialogAdd=!0}}},[r("v-icon",[e._v("mdi-plus")])],1),r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialogAdd,callback:function(t){e.dialogAdd=t},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n         Dependencia\n       ")]),r("v-form",{ref:"form",staticStyle:{margin:"auto",width:"70%",display:"flex","flex-direction":"column","align-items":"center"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.rules,label:"Nombre(s)"},model:{value:e.newDep.nombre,callback:function(t){e.$set(e.newDep,"nombre",t)},expression:"newDep.nombre"}}),r("v-text-field",{attrs:{rules:e.desRules,label:"Descripción"},model:{value:e.newDep.descripcion,callback:function(t){e.$set(e.newDep,"descripcion",t)},expression:"newDep.descripcion"}}),r("v-text-field",{attrs:{rules:e.rules,label:"Lugar"},model:{value:e.newDep.lugar,callback:function(t){e.$set(e.newDep,"lugar",t)},expression:"newDep.lugar"}}),r("v-text-field",{attrs:{rules:e.rules,label:"Coordinador"},model:{value:e.newDep.coordinador,callback:function(t){e.$set(e.newDep,"coordinador",t)},expression:"newDep.coordinador"}}),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{disabled:!e.valid,color:"primary",text:""},on:{click:function(t){return e.addDep()}}},[e._v("\n           Agregar\n         ")]),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.dialogAdd=!1}}},[e._v("\n           Cancelar\n         ")])],1)],1)],1)],1),r("v-dialog",{attrs:{width:"50vw"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",[e._v("\n         Éxito\n       ")]),r("v-card-text",[e._v("\n         Se ha realizado la operación con éxito\n       ")]),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"primary",attrs:{text:""},on:{click:function(t){return e.updatePage()}}},[e._v("\n           Aceptar\n         ")])],1)],1)],1)],2)},ge=[],xe=(r("6b54"),r("96cf"),r("3b8d")),we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"depExtendContent"},[r("Users",{attrs:{dep:e.dep}})],1)},ke=[],ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"usersContent"},[r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n         Editar usuario\n       ")]),r("div",{staticStyle:{margin:"auto",width:"70%",display:"flex","flex-direction":"column","align-items":"center"}},[r("v-text-field",{attrs:{label:"Nombre(s)"},model:{value:e.currentUser.nombre,callback:function(t){e.$set(e.currentUser,"nombre",t)},expression:"currentUser.nombre"}}),r("v-text-field",{attrs:{label:"Apellido(s)",value:e.currentUser.apellido},model:{value:e.currentUser.apellido,callback:function(t){e.$set(e.currentUser,"apellido",t)},expression:"currentUser.apellido"}}),r("v-text-field",{attrs:{label:"Email",value:e.currentUser.email},model:{value:e.currentUser.email,callback:function(t){e.$set(e.currentUser,"email",t)},expression:"currentUser.email"}}),r("v-select",{attrs:{placeholder:"Dependencias",multiple:"",solo:"",attach:"",items:e.dep?e.dep.nombre:["Logística","Desarrollo"]},model:{value:e.currentUser.deps,callback:function(t){e.$set(e.currentUser,"deps",t)},expression:"currentUser.deps"}}),r("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Valido hasta","prepend-icon":"event",readonly:""},model:{value:e.currentUser.valido,callback:function(t){e.$set(e.currentUser,"valido",t)},expression:"currentUser.valido"}},a))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.currentUser.valido,callback:function(t){e.$set(e.currentUser,"valido",t)},expression:"currentUser.valido"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.date)}}},[e._v("OK")])],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.updateUser()}}},[e._v("\n           Actualizar\n         ")]),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.updatePage()}}},[e._v("\n           Cancelar\n         ")])],1)],1)],1),r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialogAdd,callback:function(t){e.dialogAdd=t},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n         Agregar usuario\n       ")]),r("v-form",{ref:"form",staticStyle:{margin:"auto",width:"70%",display:"flex","flex-direction":"column","align-items":"center"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.rules,label:"Nombre(s)"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-text-field",{attrs:{rules:e.rules,label:"Apellido(s)"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}}),r("v-text-field",{attrs:{rules:e.emailRules,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-select",{attrs:{rules:e.selectRules,placeholder:"Dependencias",multiple:!0,items:e.availableDeps},model:{value:e.deps,callback:function(t){e.deps=t},expression:"deps"}}),r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Valido hasta","prepend-icon":"event",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.date)}}},[e._v("OK")])],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{disabled:!e.valid,color:"primary",text:""},on:{click:function(t){return e.addUser()}}},[e._v("\n           Agregar\n         ")]),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.dialogAdd=!1}}},[e._v("\n           Cancelar\n         ")])],1)],1)],1)],1)],1),r("div",{staticClass:"table"},[r("div",{staticStyle:{width:"50%"}},[r("v-text-field",{attrs:{placeholder:"Buscar usuarios nombre, apellido, correo o dependencia","append-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"100%"},attrs:{search:e.search,loading:0===e.users.length,headers:e.headers,items:e.users,"items-per-page":15},scopedSlots:e._u([{key:"item.deps",fn:function(t){var a=t.item;return e._l(a.deps,(function(t){return r("p",{key:t,domProps:{textContent:e._s(t)}})}))}},{key:"item.acciones",fn:function(t){var a=t.item;return[r("v-btn",{staticClass:"mr-1",attrs:{small:"",color:"primary",rounded:""},on:{click:function(t){return e.editUser(a)}}},[r("v-icon",[e._v("mdi-pencil")])],1),r("v-btn",{attrs:{small:"",color:"error",rounded:""},on:{click:function(t){return e.removeUser(a)}}},[r("v-icon",[e._v("mdi-delete")])],1)]}}])}),r("v-btn",{staticStyle:{"margin-top":"-45px"},attrs:{color:"primary",dark:"",small:"",fab:""},on:{click:function(t){e.dialogAdd=!0}}},[r("v-icon",[e._v("mdi-plus")])],1)],1)])},_e=[],Ue=(r("7f7f"),r("6762"),r("2fdb"),r("1543")),Ce={data:function(){return{dateRules:[function(e){return!!e||"Obligatorio"}],emailRules:[function(e){return!!e||"Obligatorio."},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Email inválido"}],rules:[function(e){return!!e||"Obligatorio"},function(e){return e&&e.length<=20||"Max 20 carácteres"}],selectRules:[function(e){return e.length>0||"Al menos 1"},function(e){var t=/$/;return t.test(e)}],name:"",lastname:"",email:"",password:"password",deps:[],valid:"",date:(new Date).toISOString().substr(0,10),menu:!1,menu2:!1,search:"",currentUser:"",dialogEdit:!1,dialogAdd:!1,nameLbl:!1,headers:[{text:"Id",value:"id",align:"center"},{text:"Nombre",align:"center",sortable:!0,value:"nombre"},{text:"Apellido",value:"apellido",align:"center"},{text:"Email",value:"email",align:"center"},{text:"Estado",value:"estado",sortable:!1,align:"center"},{text:"Dependencias",value:"deps",sortable:!1,align:"center"},{text:"Acciones",value:"acciones",sortable:!1,align:"center"},{text:"Valido hasta",value:"valido",sortable:!1,align:"center"}],users:[]}},props:["dep"],watch:{dep:function(){this.users=[],this.fetchUsers()}},created:function(){this.users=[],this.fetchUsers()},computed:{availableDeps:function(){var e=this.dep?[this.dep]:["Logística","Desarrollo"];return e}},methods:{updatePage:function(){this.$router.go(this.$router.currentRoute)},fetchUsers:function(){var e=this,t={id:"",nombre:"",apellido:"",estado:"",email:"",valido:"",deps:[]},r=(new Date).toISOString().substring(0,10);this.dep?Ue.usersCollection.get().then((function(a){a.forEach((function(a){var n=a.data();n.deps.includes(e.dep)&&(t={id:n.id,nombre:n.nombre,apellido:n.apellido,valido:n.valido,estado:r>n.valido?"Inactivo":"Activo",email:n.email,deps:n.deps},e.users.push(t))}))})):Ue.usersCollection.get().then((function(a){a.forEach((function(a){var n=a.data();n.id&&(t={id:n.id,nombre:n.nombre,apellido:n.apellido,valido:n.valido,estado:r>n.valido?"Inactivo":"Activo",email:n.email,deps:n.deps},e.users.push(t))}))}))},addUser:function(){var e=Object(xe["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={id:this.users.length.toString(),nombre:this.name,password:this.password,apellido:this.lastname,email:this.email,valido:this.date,deps:this.deps},e.next=3,Ue.usersCollection.doc(t.id).set(t);case 3:Ue.auth.createUserWithEmailAndPassword(this.email,this.password).then((function(e){Ue.usersCollection.add(t),r.$router.push("users")})).catch((function(e){console.log(e)})),this.updatePage();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeUser:function(){var e=Object(xe["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ue.usersCollection.doc(t.id).delete();case 2:location.reload();case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),editUser:function(e){this.dialogEdit=!0,this.currentUser=e},updateUser:function(){var e=Object(xe["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={id:this.currentUser.id,nombre:this.currentUser.nombre,apellido:this.currentUser.apellido,email:this.currentUser.email,valido:this.currentUser.valido,deps:this.currentUser.deps},e.next=3,Ue.usersCollection.doc(t.id).set(t);case 3:this.$router.go(this.$router.currentRoute);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Se=Ce,Ve=(r("193c"),Object(d["a"])(Se,ye,_e,!1,null,null,null)),De=Ve.exports;p()(Ve,{VBtn:m["a"],VCard:R["a"],VCardActions:P["a"],VCardTitle:P["c"],VDataTable:ae["a"],VDatePicker:ne["a"],VDialog:I["a"],VDivider:ie["a"],VForm:T["a"],VIcon:f["a"],VMenu:se["a"],VSelect:G["a"],VSpacer:h["a"],VTextField:M["a"]});var Ee={name:"DepExtend",components:{Users:De},props:["dep"]},Ae=Ee,Oe=Object(d["a"])(Ae,we,ke,!1,null,null,null),$e=Oe.exports,Re=r("1543"),Pe={name:"dep",components:{DepExtend:$e},data:function(){return{rules:[function(e){return!!e||"Obligatorio"},function(e){return e&&e.length<=20||"Max 20 carácteres"}],desRules:[function(e){return!!e||"Obligatorio"},function(e){return e&&e.length<=100||"Max 100 carácteres"}],valid:!1,newDep:{nombre:"",descripcion:"",lugar:"",coordinador:""},currentDep:{},dialogEdit:!1,dialogAdd:!1,dialogSuccess:!1,deps:[]}},created:function(){var e=this;Re.depsCollection.get().then((function(t){t.forEach((function(t){var r=t.data();e.deps.push({id:r.id,nombre:r.nombre,descripcion:r.descripcion,lugar:r.lugar,coordinador:r.coordinador,img:"https://picsum.photos/1920/1080?random"})}))}))},methods:{updatePage:function(){this.$router.go(this.$router.currentRoute)},addDep:function(){var e=Object(xe["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={id:Math.floor(1e4*Math.random()).toString(),nombre:this.newDep.nombre,descripcion:this.newDep.descripcion,lugar:this.newDep.lugar,coordinador:this.newDep.coordinador},e.next=3,Re.depsCollection.doc(t.id).set(t);case 3:this.dialogSuccess=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteDep:function(){var e=Object(xe["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Re.depsCollection.doc(t.id).delete();case 2:this.dialogSuccess=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),editDep:function(e){this.currentDep=e,this.dialogEdit=!0},closeWin:function(){this.dialogEdit=!1}}},je=Pe,Ie=(r("86e5"),r("adda")),Te=Object(d["a"])(je,be,ge,!1,null,null,null),Me=Te.exports;p()(Te,{VBtn:m["a"],VCard:R["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VDialog:I["a"],VDivider:ie["a"],VForm:T["a"],VIcon:f["a"],VImg:Ie["a"],VSpacer:h["a"],VTextField:M["a"]});r("8aa5");a["a"].use(V["a"]);var ze=new V["a"]({routes:[{path:"/",component:q},{path:"/login",component:q,meta:{requiresAuth:!0}},{path:"/profileUser",component:le},{path:"/register",component:Y},{path:"/adminProfile",redirect:"/adminProfile/users",name:"admin",component:he,children:[{path:"users",name:"users",component:De},{path:"deps",name:"deps",component:Me}]}]}),qe=ze,Be=r("2f62"),Le=r("1543");a["a"].use(Be["a"]);var Ne,Fe=new Be["a"].Store({state:{currentUser:{nombre:"",apellido:"",email:"",password:"",id:0,deps:[],valido:""},userProfile:{},currentDep:{dep:"",id:0}},actions:{fetchUserProfile:function(e){var t=e.commit,r=e.state;Le.usersCollection.doc(r.currentUser.uid).get().then((function(e){t("setUserProfile",e.data())})).catch((function(e){console.log(e)}))}},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setUserProfile:function(e,t){e.userProfile=t}}}),Ze=r("1543");a["a"].config.productionTip=!1,Ze.auth.onAuthStateChanged((function(e){Ne||(Ne=new a["a"]({el:"#app",vuetify:S,router:qe,store:Fe,render:function(e){return e(U)}}).$mount("#app"))}))},5899:function(e,t,r){"use strict";var a=r("7184"),n=r.n(a);n.a},6299:function(e,t,r){},"6ace":function(e,t,r){"use strict";var a=r("9ec0"),n=r.n(a);n.a},7184:function(e,t,r){},"86e5":function(e,t,r){"use strict";var a=r("6299"),n=r.n(a);n.a},"9ec0":function(e,t,r){},b62b:function(e,t,r){},c00d:function(e,t,r){"use strict";var a=r("2f8f"),n=r.n(a);n.a},e111:function(e,t,r){},ef32:function(e,t,r){}});
//# sourceMappingURL=app.ba8cd6cc.js.map