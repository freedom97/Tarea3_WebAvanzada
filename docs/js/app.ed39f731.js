(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("1356"),a=n.n(r);a.a},1356:function(e,t,n){},1543:function(e,t,n){"use strict";n.r(t),n.d(t,"db",(function(){return o})),n.d(t,"auth",(function(){return i})),n.d(t,"currentUser",(function(){return c})),n.d(t,"usersCollection",(function(){return u}));var r=n("742a"),a=n.n(r),s=(n("8c44"),n("1dd9"),{apiKey:"AIzaSyDY6BUnXBif2-2OncMk4Cw2oP9Q3BsGjj0",authDomain:"tarea3webavanzada.firebaseapp.com",databaseURL:"https://tarea3webavanzada.firebaseio.com",projectId:"tarea3webavanzada",storageBucket:"tarea3webavanzada.appspot.com",messagingSenderId:"894095532908",appId:"1:894095532908:web:70c423a515db856c378949",measurementId:"G-6TV7377Y2Z"});a.a.initializeApp(s);var o=a.a.firestore(),i=a.a.auth(),c=i.currentUser,l={timestampsInSnapshots:!0};o.settings(l);var u=o.collection("users")},"22bb":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},s=[],o={name:"App",components:{},data:function(){return{}}},i=o,c=(n("034f"),n("2877")),l=n("6544"),u=n.n(l),d=n("7496"),p=Object(c["a"])(i,a,s,!1,null,null,null),f=p.exports;u()(p,{VApp:d["a"]});var m=n("f309");r["a"].use(m["a"]);var v=new m["a"]({icons:{iconfont:"mdi"}}),b=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("v-card",{staticClass:"containerClass",attrs:{elevation:"5"}},[n("v-container",[n("v-dialog",{attrs:{persistent:"",width:"310"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Imposible iniciar sesión. Revisar correo o contraseña")]),n("v-card-text",[e._v(e._s(e.msg))]),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),n("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.isOpen=!1}}},[e._v("Entendido")])],1)],1)],1),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("h1",[e._v("Inicio de Sesión")]),n("br"),n("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),n("p",[e._v("\r\n            ¿No tienes una cuenta?,\r\n            "),n("router-link",{staticClass:"linkStyle",attrs:{to:"/register"}},[e._v("Regístrate")])],1),n("v-text-field",{attrs:{type:e.show1?"text":"password",label:"Password",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),n("br"),n("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.login()}}},[e._v("Ingresar")])],1)],1)],1)],1)},w=[],g=(n("bc3a"),n("1543")),y={name:"Login",data:function(){return{show1:!1,show2:!0,show3:!1,show4:!1,email:"",password:"",isOpen:!1,msg:"",emailRules:[function(e){return!!e||"El correo electrónico es obligatorio"}],passwordRules:[function(e){return!!e||"La contraseña es obligatoria"}]}},methods:{login:function(){var e=this;g.auth.signInWithEmailAndPassword(this.email,this.password).then((function(t){e.$store.commit("setCurrentUser",t.user),e.$store.dispatch("fetchUserProfile"),e.$router.push("/profileUser")})).catch((function(e){console.log(e)}))}}},x=y,C=(n("c0a8"),n("8336")),_=n("b0af"),O=n("99d9"),k=n("a523"),P=n("169a"),j=n("4bd4"),U=n("8654"),E=Object(c["a"])(x,h,w,!1,null,"270e018b",null),S=E.exports;u()(E,{VBtn:C["a"],VCard:_["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VContainer:k["a"],VDialog:P["a"],VForm:j["a"],VTextField:U["a"]});var R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"principal"},[n("div",{staticClass:"form"},[n("v-card",[n("v-container",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"1",md:"4",sm:"3"}},[n("h1",[e._v(e._s(e.title))])])],1),n("div",{staticClass:"registerContent"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[n("v-text-field",{attrs:{rules:e.nameRules,label:"Nombres",required:""},model:{value:e.names,callback:function(t){e.names=t},expression:"names"}})],1),n("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[n("v-text-field",{attrs:{rules:e.lastnamesRules,label:"Apellidos",required:""},model:{value:e.lastnames,callback:function(t){e.lastnames=t},expression:"lastnames"}})],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"1",md:"6",sm:"2"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"Correo",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show3?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch],type:e.show3?"text":"password",name:"input-10-2",label:"Contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show3=!e.show3}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show4?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch,e.rules.samePassword],type:e.show4?"text":"password",name:"input-10-2",label:"Confirmar contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show4=!e.show4}},model:{value:e.conPassword,callback:function(t){e.conPassword=t},expression:"conPassword"}})],1)],1)],1),n("br"),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"8"}},[n("v-subheader",[e._v("Datos para la dependencia")])],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[n("v-text-field",{attrs:{rules:e.nameRulesDependences,label:"Nombre de la dependencia",required:""},model:{value:e.nameDependence,callback:function(t){e.nameDependence=t},expression:"nameDependence"}})],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"1",md:"3",sm:"1"}},[n("v-btn",{staticStyle:{margin:"5px",background:"#08799C"},attrs:{disabled:e.disabledButtonRegister,color:"primary"},on:{click:function(t){return e.signup()}}},[e._v("Registrarse")])],1)],1)],1),n("input",e._g({attrs:{type:"button"}},e.signup))],1)],1)],1)])},V=[],D=(n("1543"),n("1543")),q={name:"Register",data:function(){var e=this;return{title:"Register",names:"",lastnames:"",email:"",password:"",conPassword:"",nameDependence:"",isActiveDependence:!1,show1:!1,show2:!0,show3:!1,show4:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=8||"Min 8 characters"},samePassword:function(t){return t===e.password||"Las contraseñas no coinciden"}},nameRules:[function(e){return!!e||"El nombre es requerido"},function(e){return e.length>3||"El nombre debe ser más largo a 3 caracteres"}],lastnameRules:[function(e){return!!e||"El apellido es requerido"},function(e){return e.length>3||"El apellido debe ser más largo a 3 caracteres"}],emailRules:[function(e){return!!e||"El correo es requerido"},function(e){return/^[a-zA-Z0-9_.+-]+@(gmail|hotmail)\.com$/.test(e)||"El correo no es valido"}],nameRulesDependences:[function(e){return!!e||"El nombre de la dependencia es requerida"},function(e){return e.length>1||"El nombre de la dependencia debe ser más largo a 1 caracter"}]}},methods:{signup:function(){var e=this,t={name:this.names,lastName:this.lastnames,email1:this.email,pass:this.password,dependence:this.nameDependence,activie:this.isActiveDependence};console.log(this.names),D.auth.createUserWithEmailAndPassword(this.email,this.password).then((function(n){D.usersCollection.add({userInfoRegister:t}),e.$router.push("/login")})).catch((function(e){console.log(e)}))}},computed:{disabledButtonRegister:function(){return!this.names&&!this.lastname&&!this.email&&!this.password&&!this.nameDependence&&!this.isActiveDependence&&this.conPassword===this.password}}},A=q,I=(n("65de"),n("62ad")),M=n("0fd9"),T=n("e0c7"),B=Object(c["a"])(A,R,V,!1,null,"31162015",null),$=B.exports;u()(B,{VBtn:C["a"],VCard:_["a"],VCol:I["a"],VContainer:k["a"],VForm:j["a"],VRow:M["a"],VSubheader:T["a"],VTextField:U["a"]});var z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("v-container",[n("h1",[e._v("Información personal")]),n("br"),n("v-card",{staticClass:"containerClass",attrs:{elevation:"7"}},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",{attrs:{id:"table-user"}},[n("tr",[n("th",{staticClass:"text-left"},[e._v("Nombres")]),n("th",{staticClass:"text-left"},[e._v("Apellidos")])])]),n("tbody",{attrs:{id:"table-user"}},[n("tr",[n("td"),n("td")])])]},proxy:!0}])})],1),n("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.getInfoUser()}}},[e._v("Editar perfil")]),n("br"),n("h1",[e._v("Información de Dependencia")]),n("br"),n("v-card",{staticClass:"containerClass",attrs:{elevation:"5"}},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",{attrs:{id:"table-dependence"}},[n("tr",[n("th",{staticClass:"text-left"},[e._v("Nombre dependencia")]),n("th",{staticClass:"text-left"},[e._v("Coordinador")]),n("th",{staticClass:"text-left"},[e._v("Número máximo de usuarios")]),n("th",{staticClass:"text-left"},[e._v("Ubicación")])])]),n("tbody",{attrs:{id:"table-user"}},e._l(e.listUsers,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t.names))]),n("td")])})),0)]},proxy:!0}])})],1),n("br"),n("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.login()}}},[e._v("Editar dependencia")])],1)],1)},N=[],L=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),F=n("2f62");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(L["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=n("1543"),W={name:"ProfileUser",data:function(){return{title:"ProfileUser",listUsers:[],item:{name:""}}},computed:H({},Object(F["b"])(["currentUser"])),methods:{getInfoUser:function(){var e=document.getElementById("table-user");J.usersCollection.onSnapshot((function(t){e.innerHTML="",t.forEach((function(t){console.log("".concat(t.id,"=> ").concat(t.data())),e.innerHTML=" <tr >\n                <td> ".concat(t.data(),"</td>\n                <td></td>\n              </tr> ")}))}))}}},Y=W,Z=(n("6ace"),n("1f4f")),K=Object(c["a"])(Y,z,N,!1,null,null,null),Q=K.exports;u()(K,{VBtn:C["a"],VCard:_["a"],VContainer:k["a"],VSimpleTable:Z["a"]});var X=n("742a"),ee=n.n(X);r["a"].use(b["a"]);var te=new b["a"]({routes:[{path:"/",component:S},{path:"/login",component:S,meta:{requiresAuth:!0}},{path:"/profileUser",component:Q},{path:"/register",component:$}]});te.beforeEach((function(e,t,n){var r=e.matched.some((function(e){return e.meta.requiresAuth})),a=ee.a.auth().currentUser;r&&!a?n("/login"):n()}));var ne=te,re=n("1543");r["a"].use(F["a"]);var ae,se=new F["a"].Store({state:{currentUser:{names:"",lastnames:"",email:"",password:"",dependences:"",active:"false"},userProfile:{}},actions:{fetchUserProfile:function(e){var t=e.commit,n=e.state;re.usersCollection.doc(n.currentUser.uid).get().then((function(e){t("setUserProfile",e.data())})).catch((function(e){console.log(e)}))}},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setUserProfile:function(e,t){e.userProfile=t}}}),oe=n("1543");r["a"].config.productionTip=!1,oe.auth.onAuthStateChanged((function(e){ae||(ae=new r["a"]({el:"#app",vuetify:v,router:ne,store:se,render:function(e){return e(f)}}).$mount("#app"))}))},"65de":function(e,t,n){"use strict";var r=n("22bb"),a=n.n(r);a.a},"6ace":function(e,t,n){"use strict";var r=n("9ec0"),a=n.n(r);a.a},"9b0e":function(e,t,n){},"9ec0":function(e,t,n){},c0a8:function(e,t,n){"use strict";var r=n("9b0e"),a=n.n(r);a.a}});
//# sourceMappingURL=app.ed39f731.js.map