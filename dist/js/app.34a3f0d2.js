(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/Tarea3_WebAvanzada/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("1356"),r=a.n(n);r.a},1356:function(e,t,a){},1543:function(e,t,a){"use strict";a.r(t),a.d(t,"db",(function(){return o})),a.d(t,"auth",(function(){return i})),a.d(t,"currentUser",(function(){return l})),a.d(t,"usersCollection",(function(){return u}));var n=a("742a"),r=a.n(n),s=(a("8c44"),a("1dd9"),{apiKey:"AIzaSyDY6BUnXBif2-2OncMk4Cw2oP9Q3BsGjj0",authDomain:"tarea3webavanzada.firebaseapp.com",databaseURL:"https://tarea3webavanzada.firebaseio.com",projectId:"tarea3webavanzada",storageBucket:"tarea3webavanzada.appspot.com",messagingSenderId:"894095532908",appId:"1:894095532908:web:70c423a515db856c378949",measurementId:"G-6TV7377Y2Z"});r.a.initializeApp(s);var o=r.a.firestore(),i=r.a.auth(),l=i.currentUser,c={timestampsInSnapshots:!0};o.settings(c);var u=o.collection("users")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},s=[],o={name:"App",components:{},data:function(){return{}}},i=o,l=(a("034f"),a("2877")),c=a("6544"),u=a.n(c),d=a("7496"),p=Object(l["a"])(i,r,s,!1,null,null,null),f=p.exports;u()(p,{VApp:d["a"]});var m=a("f309");n["a"].use(m["a"]);var v=new m["a"]({icons:{iconfont:"mdi"}}),h=a("8c4f"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("v-card",{staticClass:"containerClass",attrs:{elevation:"5"}},[a("v-container",[a("v-dialog",{attrs:{persistent:"",width:"310"},scopedSlots:e._u([{key:"activator",fn:function(e){e.on}}]),model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Imposible iniciar sesión")]),a("v-card-text",[e._v(e._s(e.msg))]),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.isOpen=!1}}},[e._v("Entendido")])],1)],1)],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("h1",[e._v("Inicio de Sesión")]),a("br"),a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),a("p",[e._v("\r\n            ¿No tienes una cuenta?,\r\n            "),a("router-link",{staticClass:"linkStyle",attrs:{to:"/register"}},[e._v("Regístrate")])],1),a("v-text-field",{attrs:{type:e.show1?"text":"password",label:"Password",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),a("br"),a("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.login()}}},[e._v("Ingresar")])],1)],1)],1)],1)},w=[],g=(a("bc3a"),a("1543")),y={name:"Login",data:function(){return{show1:!1,show2:!0,show3:!1,show4:!1,email:"",password:"",isOpen:!1,msg:"",emailRules:[function(e){return!!e||"El correo electrónico es obligatorio"}],passwordRules:[function(e){return!!e||"La contraseña es obligatoria"}]}},methods:{login:function(){var e=this;g.auth.signInWithEmailAndPassword(this.email,this.password).then((function(t){e.$store.commit("setCurrentUser",t.user),e.$store.dispatch("fetchUserProfile"),e.$router.push("/profileUser")})).catch((function(e){console.log(e)}))}}},x=y,C=(a("c562"),a("8336")),_=a("b0af"),k=a("99d9"),P=a("a523"),V=a("169a"),R=a("4bd4"),j=a("8654"),O=Object(l["a"])(x,b,w,!1,null,"5b9db9ba",null),E=O.exports;u()(O,{VBtn:C["a"],VCard:_["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VContainer:P["a"],VDialog:V["a"],VForm:R["a"],VTextField:j["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"principal"},[a("div",{staticClass:"form"},[a("v-card",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"1",md:"4",sm:"3"}},[a("h1",[e._v(e._s(e.title))])])],1),a("div",{staticClass:"registerContent"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[a("v-text-field",{attrs:{rules:e.nameRules,label:"Nombres",required:""},model:{value:e.names,callback:function(t){e.names=t},expression:"names"}})],1),a("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[a("v-text-field",{attrs:{rules:e.lastnamesRules,label:"Apellidos",required:""},model:{value:e.lastnames,callback:function(t){e.lastnames=t},expression:"lastnames"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"1",md:"6",sm:"2"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Correo",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show3?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch],type:e.show3?"text":"password",name:"input-10-2",label:"Contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show3=!e.show3}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show4?"visibility":"visibility_off",rules:[e.rules.required,e.rules.emailMatch,e.rules.samePassword],type:e.show4?"text":"password",name:"input-10-2",label:"Confirmar contraseña",hint:"Mínimo 8 caracteres",value:"",required:""},on:{"click:append":function(t){e.show4=!e.show4}},model:{value:e.conPassword,callback:function(t){e.conPassword=t},expression:"conPassword"}})],1)],1)],1),a("br"),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-subheader",[e._v("Datos para la dependencia")])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"1",md:"5",sm:"2"}},[a("v-text-field",{attrs:{rules:e.nameRulesDependences,label:"Nombre de la dependencia",required:""},model:{value:e.nameDependence,callback:function(t){e.nameDependence=t},expression:"nameDependence"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"1",md:"3",sm:"1"}},[a("v-btn",{staticStyle:{margin:"5px",background:"#08799C"},attrs:{disabled:e.disabledButtonRegister,color:"primary"},on:{click:function(t){return e.signup()}}},[e._v("Registrarse")])],1)],1)],1),a("input",e._g({attrs:{type:"button"}},e.signup))],1)],1)],1)])},S=[],U=a("1543"),A={name:"Register",data:function(){var e=this;return{title:"Register",names:"",lastnames:"",email:"",password:"",conPassword:"",nameDependence:"",isActiveDependence:!1,show1:!1,show2:!0,show3:!1,show4:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=8||"Min 8 characters"},samePassword:function(t){return t===e.password||"Las contraseñas no coinciden"}},nameRules:[function(e){return!!e||"El nombre es requerido"},function(e){return e.length>3||"El nombre debe ser más largo a 3 caracteres"}],lastnameRules:[function(e){return!!e||"El apellido es requerido"},function(e){return e.length>3||"El apellido debe ser más largo a 3 caracteres"}],emailRules:[function(e){return!!e||"El correo es requerido"},function(e){return/^[a-zA-Z0-9_.+-]+@(gmail|hotmail)\.com$/.test(e)||"El correo no es valido"}],nameRulesDependences:[function(e){return!!e||"El nombre de la dependencia es requerida"},function(e){return e.length>1||"El nombre de la dependencia debe ser más largo a 1 caracter"}]}},methods:{signup:function(){var e=this,t={name:this.names,lastName:this.lastnames,email1:this.email,pass:this.password,dependence:this.nameDependence,activie:this.isActiveDependence};U.auth.createUserWithEmailAndPassword(this.email,this.password).then((function(a){U.usersCollection.doc(a.user.uid).set({userInfoRegister:t}).then((function(t){e.$router.push("/login")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},computed:{disabledButtonRegister:function(){return!this.names&&!this.lastname&&!this.email&&!this.password&&!this.nameDependence&&!this.isActiveDependence&&this.conPassword===this.password}}},D=A,I=(a("aeb8"),a("62ad")),z=a("0fd9"),M=a("e0c7"),T=Object(l["a"])(D,q,S,!1,null,"e0781a58",null),$=T.exports;u()(T,{VBtn:C["a"],VCard:_["a"],VCol:I["a"],VContainer:P["a"],VForm:R["a"],VRow:z["a"],VSubheader:M["a"],VTextField:j["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("h1",[e._v("Información personal")]),a("br"),a("v-card",{staticClass:"containerClass",attrs:{elevation:"5"}},[a("label",[e._v("Nombre:")])]),a("v-text-field",{attrs:{type:e.show1?"text":"password",label:"Password",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),a("br"),a("v-btn",{staticStyle:{margin:"10px",background:"#08799C"},attrs:{color:"primary"},on:{click:function(t){return e.login()}}},[e._v("Ingresar")])],1)],1)],1)},F=[],N={},L=N,W=(a("6ace"),Object(l["a"])(L,B,F,!1,null,null,null)),G=W.exports;u()(W,{VBtn:C["a"],VCard:_["a"],VContainer:P["a"],VForm:R["a"],VTextField:j["a"]});var J=a("742a"),Y=a.n(J);n["a"].use(h["a"]);var Z=new h["a"]({mode:"history",routes:[{path:"/",component:E},{path:"/login",component:E,meta:{requiresAuth:!0}},{path:"/profileUser",component:G},{path:"/register",component:$}]});Z.beforeEach((function(e,t,a){var n=e.matched.some((function(e){return e.meta.requiresAuth})),r=Y.a.auth().currentUser;n&&!r?a("/login"):a()}));var K=Z,Q=a("2f62"),X=a("1543");n["a"].use(Q["a"]);var H,ee=new Q["a"].Store({state:{currentUser:{names:"",lastnames:"",email:"",password:"",dependences:[],active:"false"},userProfile:{}},actions:{fetchUserProfile:function(e){var t=e.commit,a=e.state;X.usersCollection.doc(a.currentUser.uid).get().then((function(e){t("setUserProfile",e.data())})).catch((function(e){console.log(e)}))}},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setUserProfile:function(e,t){e.userProfile=t}}}),te=a("1543");n["a"].config.productionTip=!1,te.auth.onAuthStateChanged((function(e){H||(H=new n["a"]({el:"#app",vuetify:v,router:K,store:ee,render:function(e){return e(f)}}).$mount("#app"))}))},"6ace":function(e,t,a){"use strict";var n=a("9ec0"),r=a.n(n);r.a},"9ec0":function(e,t,a){},aeb8:function(e,t,a){"use strict";var n=a("dde2"),r=a.n(n);r.a},b02a:function(e,t,a){},c562:function(e,t,a){"use strict";var n=a("b02a"),r=a.n(n);r.a},dde2:function(e,t,a){}});
//# sourceMappingURL=app.34a3f0d2.js.map